
## 團隊分工表

### 一、專案架構

```
ai-attention-project/
├── detector/            👤 A - 偵測模組
│   └── eye_tracker.py   # 臉部與眼部 landmark 偵測及 EAR 計算
│
├── logic/               👤 C - 判斷模組
│   └── sleep_detector.py # 時間累計與狀態分析邏輯
│
├── web_ui/              👤 B - 顯示模組
│   └── display.py       # 畫框、顯示即時畫面與提示
│
├── shared/              👥 共用模組
│   ├── config.py        # 閾值與參數設定
│   └── utils.py         # 畫框、時間格式化等工具函數
│
├── main.py              🧩 整合入口，串接所有模組
├── requirements.txt     📦 套件列表
├── .gitignore           🔒 忽略測試影片、暫存檔等
└── README.md            📖 專案說明與分工紀錄
```

### 二、功能與接口規範

| 成員    | 模組檔案                      | 主要函數                           | 輸入                | 輸出                                                  | 備註          |
| ----- | ------------------------- | ------------------------------ | ----------------- | --------------------------------------------------- | ----------- |
| **A** | `detector/eye_tracker.py` | `detect_eye_and_face(frame)`   | `frame` (影格)      | `{ 'eye_found': bool, 'face_found': bool }`         | 基礎偵測，提供原始狀態 |
| **C** | `logic/sleep_detector.py` | `analyze_state(detect_res)`    | 偵測結果 dict         | `status` 字串 (`'attentive'/'zoning out'/'sleeping'`) | 時間閾值、異常條件實作 |
| **B** | `web_ui/display.py`       | `render_result(frame, status)` | `frame`, `status` | 顯示視窗，並在畫面框選異常者                                      | UI 介面與互動    |

### 三、主要參數設定（shared/config.py）

```python
# 單位：秒
THRESHOLD_EYE_MISSING = 3       # 眼睛 landmark 消失秒數
THRESHOLD_FACE_MISSING = 5      # 臉部 landmark 消失秒數
VIDEO_SOURCE = 0                # 攝影機編號或影片路徑
```

### 四、共用工具函數（shared/utils.py）

```python
import cv2

def draw_box(frame, box, color=(0,255,0), thickness=2):
    x, y, w, h = box
    return cv2.rectangle(frame, (x, y), (x+w, y+h), color, thickness)

# 可依需擴充其他格式化或計算工具
```

### 五、整合入口範例（main.py）

```python
import cv2
from shared.config import VIDEO_SOURCE
from shared.utils import draw_box
from detector.eye_tracker import detect_eye_and_face
from logic.sleep_detector import analyze_state
from web_ui.display import render_result

cap = cv2.VideoCapture(VIDEO_SOURCE)

while cap.isOpened():
    ret, frame = cap.read()
    if not ret:
        break

    # A: 偵測
    detect_res = detect_eye_and_face(frame)
    # C: 判斷
    status = analyze_state(detect_res)
    # B: 顯示
    render_result(frame, status)

    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

cap.release()
cv2.destroyAllWindows()
```

### 六、協作流程與注意事項

1. **各自開發：**

   * A/B/C 僅修改自己資料夾內的程式碼，`shared/` 僅做讀取。
2. **版本同步：**

   * 開工前執行 `git pull`；完成後執行 `git add/commit/push`。
3. **衝突避免：**

   * 不要三人同時修改同一檔案；如有必要新增函式，請在 shared/utils.py 或自己模組中新增命名空間。
4. **定期整合：**

   * 第二週開始每日整合測試，第三週完成 main.py 串接。

---

如此一來，三位成員既各有分工，又可以透過主程式無衝突地整合，確保專案進度與品質。
